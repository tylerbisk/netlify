<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Phototransistors & Display</title>

  
  <meta name="author" content="Â© Tyler Bisk">
  

  
  <meta name="description" content="Autonomous Maze Solving Robot Part 2">
  

  <link rel="alternate" type="application/rss+xml" title="Tyler Bisk - A portfolio of my greatest projects and achievements" href="http://localhost:4000/feed.xml">

  

  

  


  
    
      
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    
      
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">


    
  

  
    
      <link rel="stylesheet" href="/assets/css/bootstrap-social.css">
       <link rel="shortcut icon" type="image/png" href="/assets/img/favico.png">
    
      <link rel="stylesheet" href="/assets/css/main.css">
       <link rel="shortcut icon" type="image/png" href="/assets/img/favico.png">
    
  

  

  

  <!-- Facebook OpenGraph tags -->
  

  
  <meta property="og:title" content="Phototransistors & Display">
  

   
  <meta property="og:description" content="Autonomous Maze Solving Robot Part 2">
  


  <meta property="og:type" content="website">

  
  <meta property="og:url" content="http://localhost:4000/3400/part2">
  <link rel="canonical" href="http://localhost:4000/3400/part2">
  

  


  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@tylerbisk">
  <meta name="twitter:creator" content="@tylerbisk">

  
  <meta name="twitter:title" content="Phototransistors & Display">
  

  
  <meta name="twitter:description" content="Autonomous Maze Solving Robot Part 2">
  

  

  

  

</head>


  <body>

    


    <nav class="navbar navbar-expand-md navbar-light fixed-top navbar-custom "><a class="navbar-brand" href="/">Tyler Bisk</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="main-navbar">
    <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="/about">About Me</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Cornell FSAE</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="/fsae/about">about</a>
                  <a class="dropdown-item" href="/fsae/tsm">Temperature Sensing Module (2020)</a>
                  <a class="dropdown-item" href="/fsae/shutdown_box">Shutdown Box (2021)</a>
                  <a class="dropdown-item" href="/fsae/electrical_lead">Electrical Lead (2022)</a>
            </div>
          </li>
        
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Software</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="/sips">Sips</a>
                  <a class="dropdown-item" href="/freasy">Freasy</a>
            </div>
          </li>
        
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Micro-controllers</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="/zoom_buttons">Physical Zoom Buttons</a>
                  <a class="dropdown-item" href="/3400/home">Autonomous Maze-Solving Robot</a>
                  <a class="dropdown-item" href="/ece4760/lab1">Bird Song Synthesizer</a>
                  <a class="dropdown-item" href="/ece4760/lab3">PID Motor Controller</a>
                  <a class="dropdown-item" href="/ece4760/final">PIC32 Video Game</a>
            </div>
          </li>
        
          <li class="nav-item">
            <a class="nav-link" href="/resume">Resume</a>
          </li></ul>
  </div>

  

</nav>


    <!-- TODO this file has become a mess, refactor it -->







<header class="header-section ">

<div class="intro-header no-img">
  <div class="container-md">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
        <div class="page-heading">
          <h1>Phototransistors & Display</h1>
      
        
            <hr class="small">
            <span class="page-subheading">Autonomous Maze Solving Robot Part 2</span>
      
      
      
      
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container-md" role="main">
  <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      <h3 id="objective">Objective</h3>
<ol>
  <li>Build and test an infrared light detection circuit</li>
  <li>Use the Arduino Nano to characterize the infrared signals</li>
  <li>Breadboard and test a 7 Segment Display</li>
</ol>

<h3 id="the-phototransistor">The Phototransistor</h3>
<p>A phototransistor uses light to modulate how much current passes through it.  In this part, a voltage divider is implemented using a phototransistor that can sense infrared light.  By placing a phototransistor and a resistor as the top and bottom halves of a voltage divider, an analog signal is generated.  The higher the voltage read on <code class="language-plaintext highlighter-rouge">A1</code>, the more IR light is hitting the transistor.</p>
<div align="center">
    <b>Figure 1: Schematic of the Completed Phototransistor Circuit</b>
    <br />
    <img src="/assets/img/3400/phototran_schematic.png" style="width: 44%" />
    <p></p>
</div>

<p>The first of the phototransistors points to the front of teh robot.  Two additional phototransistor circuits were added, pointing left and right, so light can be sensed from any direction without the robot phyically turning.  All three phototranistors output to A1 on the Nano.</p>
<div align="center">
    <b>Figure 2: The Robot with Three Phototransistors</b>
    <br />
    <img src="/assets/img/3400/lab2_robot_phototran.jpeg" style="width: 74%" />
    <p></p>
</div>

<h3 id="the-infrared-led">The Infrared LED</h3>
<p>Next, an IR LED was connected to a function generator.  In order to limit the current passing through the LED, the LED was wired in series with a resistor.  The maximum current flowing through the LED ought to be 20mA, so at 1.2V, a 62-Ohm resistor was selected (<code class="language-plaintext highlighter-rouge">62 Ohms &gt;= 1.2 / 0.2</code>).</p>

<p>The function generator was programmed to output a sine wave of frequency 1000 Hz at an amplitude 1.2V peak-to-peak.  An offset of 0.6V was added so the voltage never goes below 0 Volts.  In order to make sure everything was wired correctly, the probes of an oscilloscope were connected across the entire series circuit.  The resulting waveform was a perfect sinusoid with frequency 1kHz.  The amplitude is not exactly 1.2V because the impedance from the function generator does not equal the impedance from the oscilloscope, but for this exercise, we only care about frequency and shape so it is not an issue that needs to be corrected.</p>
<div align="center">
    <b>Figure 3: Oscilloscipe Reading of LED at 1kHz</b>
    <br />
    <img src="/assets/img/3400/lab2_led_oscope.jpeg" style="width: 64%" />
    <p></p>
</div>

<h3 id="testing-the-phototransistor">Testing the Phototransistor</h3>
<p>Finally, with both the phototransistor circuit and the LED circuit fully connected, the phototransistor could be tested.  The probes of the oscilloscope were connected across the resistor going from A1 to ground.  When the phototransistor was pointed directly at the IR LED, the oscilloscope read a 1kHz signal, which demonstrated that the phototransistor was functional.  The wave was more square than sinusoidal because there is some amount of response time associated with all transistors.</p>
<div align="center">
    <b>Figure 4: Oscilloscipe Reading of Phototransistor Pointed at IR LED</b>
    <br />
    <img src="/assets/img/3400/lab2_photo_oscope.jpeg" style="width: 64%" />
    <p></p>
</div>
<p>It can be seen in the bottom right corner of the image that the function generated has a frequency of 1000.0 Hz.</p>

<p>Code was then flashed to the Arduino to calculate using the ADC and the DACREF what the frequency of the blinking light is.  Then, the calculated freqeuncy was sent to the serial monitor.  The threshold for the DACREF is dependent on the amount of ambient light in the room.</p>
<div align="center">
    <b>Figure 5: Serial Monitor Output of 1kHz Signal</b>
    <br />
    <img src="/assets/img/3400/lab2_monitor.png" style="width: 64%" />
    <p></p>
</div>

<h3 id="the-base-station">The Base Station</h3>
<p>The beginnings of the base station, which was introduced in part 2, included a 7 segment display, a shift register, and a second Arduino Nano.  Since there are 4 digits on the 7 segment display, it would require many digital pins to light up the entire display at once.  The shift register allows us to illuminate one digit at a time in rapid succession while still having pins to spare on the Nano.  This part of the project was spent breadboarding and relied on our knowledge of circuits.  The code to display a given integer was provided.</p>
<div align="center">
    <b>Figure 6: The Base Station Schematic</b>
    <br />
    <img src="/assets/img/3400/lab2_7seg_schematic.png" style="width: 64%" />
    <p></p>
</div>
<div align="right">
[1]
</div>

<h3 id="testing-the-base-station">Testing the Base Station</h3>
<p>After managing to completely replicate the schematic, it was time to flash the firmware to the base station.</p>
<div align="center">
    <b>Figure 7: The Completed Base Station</b>
    <br />
    <img src="/assets/img/3400/lab2_base_station1.jpeg" style="width: 64%" />
    <p></p>
</div>

<p>The code was edited to define which pin from the schematic went to each of <code class="language-plaintext highlighter-rouge">D2-D7</code> on the Nano. Our code and circuit were error-free on the first try, which illuminated the display in bright green the number <code class="language-plaintext highlighter-rouge">2468</code>, the number we specified in our code.</p>

<div align="center">
    <b>Figure 8: The Illuminated 7 Segment Display</b>
    <br />
    <img src="/assets/img/3400/lab2_base_station2.jpeg" style="width: 64%" />
    <p></p>
</div>

<p>At the end of part 2, we added code to allow for values over 9999 to be displayed on the four-digit 7-segment display.  When the number to be displayed is greater than 9999, the number is represented in scientific notation and the power of ten must be assumed to be 4.</p>

<h3 id="resources">Resources</h3>
<p>[1] C. Poitras, <em>Phototransistors &amp; Display</em>, ECE 3400, September 27, 2021.</p>

      
    </div>
  </div>
</div>


    <footer>
  <div class="container-md beautiful-jekyll-footer">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      <ul class="list-inline text-center footer-links"><li class="list-inline-item">
    <a href="mailto:tyler07039@gmail.com" title="Email me">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Email me</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://github.com/tylerbisk" title="GitHub">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-github fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">GitHub</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://twitter.com/tylerbisk" title="Twitter">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Twitter</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://linkedin.com/in/tylerbisk" title="LinkedIn">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">LinkedIn</span>
   </a>
  </li></ul>

      
      <p class="copyright text-muted">
      
        Â© Tyler Bisk
        &nbsp;&bull;&nbsp;
      
      2023

      

      
      </p>
      <!-- Add a second line to the footer -->
      <p class="theme-by text-muted">

      </p>
      </div>
    </div>
  </div>
</footer>


    
  
    
  <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>


  
    
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>


  
    
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


  



  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/assets/js/main.js"></script>
    
  







  </body>
</html>
